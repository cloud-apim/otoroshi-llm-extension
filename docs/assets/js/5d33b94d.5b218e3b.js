"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[89],{8144:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var t=o(4848),s=o(8453);o(9229);const r={sidebar_position:4},i="\ud83d\udd10 Secure your LLM provider endpoint",a={id:"llm-gateway/secure-provider",title:"\ud83d\udd10 Secure your LLM provider endpoint",description:"To secure your LLM provider endpoint http8080 for example, you could add API keys.",source:"@site/docs/llm-gateway/secure-provider.mdx",sourceDirName:"llm-gateway",slug:"/llm-gateway/secure-provider",permalink:"/otoroshi-llm-extension/docs/llm-gateway/secure-provider",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"\ud83d\udc40 Expose your LLM Provider",permalink:"/otoroshi-llm-extension/docs/llm-gateway/expose"},next:{title:"Managing secrets",permalink:"/otoroshi-llm-extension/docs/llm-gateway/secrets"}},d={},c=[{value:"Create new API Key",id:"create-new-api-key",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"-secure-your-llm-provider-endpoint",children:"\ud83d\udd10 Secure your LLM provider endpoint"}),"\n",(0,t.jsxs)(n.p,{children:["To secure your LLM provider endpoint ",(0,t.jsx)(n.a,{href:"http://openai-demo.oto.tools:8080",children:"http://openai-demo.oto.tools:8080"})," for example, you could add API keys."]}),"\n",(0,t.jsx)(n.p,{children:"To do it so, add the API Keys plugin to your route :"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:o(5245).A+"",width:"1666",height:"958"})}),"\n",(0,t.jsx)(n.p,{children:"Once added you should see your route as :"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:o(6612).A+"",width:"1666",height:"958"})}),"\n",(0,t.jsxs)(n.p,{children:["Then, we will try to send a request to our endpoint ",(0,t.jsx)(n.a,{href:"http://openai-demo.oto.tools:8080",children:"http://openai-demo.oto.tools:8080"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'curl http://openai-demo.oto.tools:8080 \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "messages": [\n      {\n        "role": "user",\n        "content": "Hello how are you ?"\n      }\n    ]\n  }\'\n'})}),"\n",(0,t.jsx)(n.p,{children:"The endpoint will return an error :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'{\n  "Otoroshi-Error": "no apikey"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"That's good ! Because we just use our endpoint without any API Key and our request got rejected."}),"\n",(0,t.jsx)(n.h2,{id:"create-new-api-key",children:"Create new API Key"}),"\n",(0,t.jsxs)(n.p,{children:["Go to ",(0,t.jsx)(n.a,{href:"http://otoroshi.oto.tools:8099/bo/dashboard/apikeys",children:"API Keys dashboard"})," and create a new Key"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:o(508).A+"",width:"1666",height:"958"})}),"\n",(0,t.jsxs)(n.p,{children:["Go to ",(0,t.jsx)(n.code,{children:"Authorized On"})," section and select your route. ",(0,t.jsx)(n.code,{children:"OpenAI Demo"})," in our example case."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:o(3488).A+"",width:"1920",height:"957"})}),"\n",(0,t.jsx)(n.p,{children:"Copy the Bearer token that may look like :"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"otoapk_urjyypqbif8gr8wx_701cd2e99c0e2707e44bf6a7bb75518c90700a867d6c22f624020b22434cf7f9"})}),"\n",(0,t.jsx)(n.p,{children:"And then re-send a new request with our Bearer token into our request headers."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:' curl http://openai-demo.oto.tools:8080 \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer otoapk_urjyypqbif8gr8wx_701cd2e99c0e2707e44bf6a7bb75518c90700a867d6c22f624020b22434cf7f9" \\\n  -d \'{\n    "messages": [\n      {\n        "role": "user",\n        "content": "Hello how are you ?"\n      }\n    ]\n  }\'\n'})}),"\n",(0,t.jsx)(n.p,{children:"Ta-da !"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:o(5429).A+"",width:"938",height:"393"})}),"\n",(0,t.jsx)(n.p,{children:"Here is our real response from the LLM with our authorized API key :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'{\n  "id": "chatcmpl-SySPnMI3VzZKQZbvT42ko0H5YhrcIAVB",\n  "object": "chat.completion",\n  "created": 1743417992,\n  "model": "gpt-4o-mini",\n  "system_fingerprint": "fp-XfvVJ9gJ2viprCxZ1pyq508tukNbuz8u",\n  "choices": [\n    {\n      "index": 0,\n      "message": {\n        "role": "assistant",\n        "content": "Hello! I\'m just a computer program, so I don\'t have feelings, but I\'m here and ready to help you. How can I assist you today?"\n      },\n      "logprobs": null,\n      "finish_reason": "stop"\n    }\n  ],\n  "usage": {\n    "prompt_tokens": 12,\n    "completion_tokens": 31,\n    "total_tokens": 43,\n    "completion_tokens_details": {\n      "reasoning_tokens": 0\n    }\n  }\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},9229:(e,n,o)=>{o(6540),o(4848)},3488:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/apikeys-create-authorized-on-a048eb402ed921262f24ec1c016b4d88.png"},508:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/apikeys-create-f5b656e7a13c58dd2a234510aac9e58a.png"},6612:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/apikeys-plugin-added-be510cda6550179a02c19851432ba558.png"},5245:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/apikeys-plugin-fc355d1f06af8cd1a9df1bffb6c21cf2.png"},5429:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/apikeys-secure-good-response-1e7cd552532205d90213ae122da6920d.png"},8453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>a});var t=o(6540);const s={},r=t.createContext(s);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);